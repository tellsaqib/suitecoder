window.CodeMirror=function(){function a(d,e){function hc(a){if(f.onDragEvent&&f.onDragEvent(kc,N(a)))return;Q(a)}function jc(a){return a>=0&&a<Db.size}function lc(a){return H(Db,a)}function mc(a,b){Ub=true;var c=b-a.height;for(var d=a;d;d=d.parent)d.height+=c}function nc(a){var b={line:0,ch:0};Fc(b,{line:Db.size-1,ch:lc(Db.size-1).text.length},mb(a),b,b);Ob=true}function oc(a){var b=[];Db.iter(0,Db.size,function(a){b.push(a.text)});return b.join(a||"\n")}function pc(a){if(P.scrollTop!=Kb){Kb=wb.scrollTop=P.scrollTop;bd([])}}function qc(a){if(f.fixedGutter&&tb.style.left!=wb.scrollLeft+"px")tb.style.left=wb.scrollLeft+"px";if(wb.scrollTop!=Kb){Kb=wb.scrollTop;if(P.scrollTop!=Kb)P.scrollTop=Kb;bd([])}if(f.onScroll)f.onScroll(kc)}function rc(a){function h(b){if(r)wb.draggable=false;Lb=false;k();l();if(Math.abs(a.clientX-b.clientX)+Math.abs(a.clientY-b.clientY)<10){O(b);kd(c.line,c.ch,true);Xc()}}function q(a){if(e=="single"){hd(c,a)}else if(e=="double"){var b=rd(a);if(db(a,o))hd(b.from,p);else hd(o,b.to)}else if(e=="triple"){if(db(a,o))hd(p,md({line:a.line,ch:0}));else hd(o,md({line:a.line+1,ch:0}))}}function s(a){var b=Zd(a,true);if(b&&!cb(b,i)){if(!Fb)Dc();i=b;q(b);Ob=false;var c=ad();if(b.line>=c.to||b.line<c.from)j=setTimeout(le(function(){s(a)}),150)}}function t(a){clearTimeout(j);var b=Zd(a);if(b)q(b);O(a);Xc();Ob=true;u();k()}gd(T(a,"shiftKey"));for(var b=R(a);b!=xb;b=b.parentNode)if(b.parentNode==vb&&b!=ub)return;for(var b=R(a);b!=xb;b=b.parentNode)if(b.parentNode==sb){if(f.onGutterClick)f.onGutterClick(kc,kb(sb.childNodes,b)+Xb,a);return O(a)}var c=Zd(a);switch(S(a)){case 3:if(m)$d(a);return;case 2:if(c)kd(c.line,c.ch,true);setTimeout(Xc,20);O(a);return}if(!c){if(R(a)==wb)O(a);return}if(!Fb)Dc();var d=+(new Date),e="single";if(Jb&&Jb.time>d-400&&cb(Jb.pos,c)){e="triple";O(a);setTimeout(Xc,20);sd(c.line)}else if(Ib&&Ib.time>d-400&&cb(Ib.pos,c)){e="double";Jb={time:d,pos:c};O(a);var g=rd(c);hd(g.from,g.to)}else{Ib={time:d,pos:c}}var i=c,j;if(f.dragDrop&&X&&!f.readOnly&&!cb(Gb.from,Gb.to)&&!db(c,Gb.from)&&!db(Gb.to,c)&&e=="single"){if(r)wb.draggable=true;var k=U(document,"mouseup",le(h),true);var l=U(wb,"drop",le(h),true);Lb=true;if(wb.dragDrop)wb.dragDrop();return}O(a);if(e=="single")kd(c.line,c.ch,true);var o=Gb.from,p=Gb.to;var u=U(document,"mousemove",le(function(a){clearTimeout(j);O(a);if(!n&&!S(a))t(a);else s(a)}),true);var k=U(document,"mouseup",le(t),true)}function sc(a){for(var b=R(a);b!=xb;b=b.parentNode)if(b.parentNode==sb)return O(a);O(a)}function tc(a){if(f.onDragEvent&&f.onDragEvent(kc,N(a)))return;O(a);var b=Zd(a,true),c=a.dataTransfer.files;if(!b||f.readOnly)return;if(c&&c.length&&window.FileReader&&window.File){var d=c.length,e=Array(d),g=0;var h=function(a,c){var f=new FileReader;f.onload=function(){e[c]=f.result;if(++g==d){b=md(b);le(function(){var a=Nc(e.join(""),b,b);hd(b,a)})()}};f.readAsText(a)};for(var i=0;i<d;++i)h(c[i],i)}else{if(Lb&&!(db(b,Gb.from)||db(Gb.to,b)))return;try{var e=a.dataTransfer.getData("Text");if(e){me(function(){var a=Gb.from,c=Gb.to;hd(b,b);if(Lb)Nc("",a,c);Oc(e);Xc()})}}catch(a){}}}function uc(a){var b=Rc();a.dataTransfer.setData("Text",b);if(m||s||t){var c=fb("img");c.scr="data:image/gif;base64,R0lGODdhAgACAIAAAAAAAP///ywAAAAAAgACAAACAoRRADs=";a.dataTransfer.setDragImage(c,0,0)}}function vc(a,b){if(typeof a=="string"){a=h[a];if(!a)return false}var c=Hb;try{if(f.readOnly)Nb=true;if(b)Hb=null;a(kc)}catch(d){if(d!=W)throw d;return false}finally{Hb=c;Nb=false}return true}function xc(a){function h(){g=true}var b=j(f.keyMap),c=b.auto;clearTimeout(wc);if(c&&!l(a))wc=setTimeout(function(){if(j(f.keyMap)==b){f.keyMap=c.call?c.call(null,kc):c}},50);var d=ob[T(a,"keyCode")],e=false;if(d==null||a.altGraphKey)return false;if(T(a,"altKey"))d="Alt-"+d;if(T(a,"ctrlKey"))d="Ctrl-"+d;if(T(a,"metaKey"))d="Cmd-"+d;var g=false;if(T(a,"shiftKey")){e=k("Shift-"+d,f.extraKeys,f.keyMap,function(a){return vc(a,true)},h)||k(d,f.extraKeys,f.keyMap,function(a){if(typeof a=="string"&&/^go[A-Z]/.test(a))return vc(a)},h)}else{e=k(d,f.extraKeys,f.keyMap,vc,h)}if(g)e=false;if(e){O(a);_d();if(n){a.oldKeyCode=a.keyCode;a.keyCode=0}}return e}function yc(a,b){var c=k("'"+b+"'",f.extraKeys,f.keyMap,function(a){return vc(a,true)});if(c){O(a);_d()}return c}function Ac(a){if(!Fb)Dc();if(n&&a.keyCode==27){a.returnValue=false}if(dc){if(Vc())dc=false}if(f.onKeyEvent&&f.onKeyEvent(kc,N(a)))return;var b=T(a,"keyCode");gd(b==16||T(a,"shiftKey"));var d=xc(a);if(t){zc=d?b:null;if(!d&&b==88&&T(a,c?"metaKey":"ctrlKey"))Oc("")}}function Bc(a){if(dc)Vc();if(f.onKeyEvent&&f.onKeyEvent(kc,N(a)))return;var b=T(a,"keyCode"),c=T(a,"charCode");if(t&&b==zc){zc=null;O(a);return}if((t&&(!a.which||a.which<10)||v)&&xc(a))return;var d=String.fromCharCode(c==null?b:c);if(f.electricChars&&Cb.electricChars&&f.smartIndent&&!f.readOnly){if(Cb.electricChars.indexOf(d)>-1)setTimeout(le(function(){ud(Gb.to.line,"smart")}),75)}if(yc(a,d))return;Tc()}function Cc(a){if(f.onKeyEvent&&f.onKeyEvent(kc,N(a)))return;if(T(a,"keyCode")==16)Hb=null}function Dc(){if(f.readOnly=="nocursor")return;if(!Fb){if(f.onFocus)f.onFocus(kc);Fb=true;if(wb.className.search(/\bCodeMirror-focused\b/)==-1)wb.className+=" CodeMirror-focused";if(!Tb)Wc(true)}Sc();_d()}function Ec(){if(Fb){if(f.onBlur)f.onBlur(kc);Fb=false;if($b)le(function(){if($b){$b();$b=null}})();wb.className=wb.className.replace(" CodeMirror-focused","")}clearInterval(Bb);setTimeout(function(){if(!Fb)Hb=null},150)}function Fc(a,b,c,d,e){if(Nb)return;if(fc){var g=[];Db.iter(a.line,b.line+1,function(a){g.push(a.text)});fc.addChange(a.line,c.length,g);while(fc.done.length>f.undoDepth)fc.done.shift()}Jc(a,b,c,d,e)}function Gc(a,b){if(!a.length)return;var c=a.pop(),d=[];for(var e=c.length-1;e>=0;e-=1){var f=c[e];var g=[],h=f.start+f.added;Db.iter(f.start,h,function(a){g.push(a.text)});d.push({start:f.start,added:f.old.length,old:g});var i={line:f.start+f.old.length-1,ch:jb(g[g.length-1],f.old[f.old.length-1])};Jc({line:f.start,ch:0},{line:h-1,ch:lc(h-1).text.length},f.old,i,i)}Ob=true;b.push(d)}function Hc(){Gc(fc.done,fc.undone)}function Ic(){Gc(fc.undone,fc.done)}function Jc(a,b,c,d,e){function x(a){return a<=Math.min(b.line,b.line+r)?a:a+r}if(Nb)return;var g=false,h=_b.text.length;if(!f.lineWrapping)Db.iter(a.line,b.line+1,function(a){if(!a.hidden&&a.text.length==h){g=true;return true}});if(a.line!=b.line||c.length>1)Ub=true;var i=b.line-a.line,j=lc(a.line),k=lc(b.line);if(a.ch==0&&b.ch==0&&c[c.length-1]==""){var l=[],m=null;if(a.line){m=lc(a.line-1);m.fixMarkEnds(k)}else k.fixMarkStarts();for(var n=0,o=c.length-1;n<o;++n)l.push(D.inheritMarks(c[n],m));if(i)Db.remove(a.line,i,Vb);if(l.length)Db.insert(a.line,l)}else if(j==k){if(c.length==1)j.replace(a.ch,b.ch,c[0]);else{k=j.split(b.ch,c[c.length-1]);j.replace(a.ch,null,c[0]);j.fixMarkEnds(k);var l=[];for(var n=1,o=c.length-1;n<o;++n)l.push(D.inheritMarks(c[n],j));l.push(k);Db.insert(a.line+1,l)}}else if(c.length==1){j.replace(a.ch,null,c[0]);k.replace(null,b.ch,"");j.append(k);Db.remove(a.line+1,i,Vb)}else{var l=[];j.replace(a.ch,null,c[0]);k.replace(null,b.ch,c[c.length-1]);j.fixMarkEnds(k);for(var n=1,o=c.length-1;n<o;++n)l.push(D.inheritMarks(c[n],j));if(i>1)Db.remove(a.line+1,i-1,Vb);Db.insert(a.line+1,l)}if(f.lineWrapping){var p=Math.max(5,wb.clientWidth/Wd()-3);Db.iter(a.line,a.line+c.length,function(a){if(a.hidden)return;var b=Math.ceil(a.text.length/p)||1;if(b!=a.height)mc(a,b)})}else{Db.iter(a.line,a.line+c.length,function(a){var b=a.text;if(!a.hidden&&b.length>h){_b=a;h=b.length;bc=true;g=false}});if(g)ac=true}var q=[],r=c.length-i-1;for(var n=0,s=Eb.length;n<s;++n){var t=Eb[n];if(t<a.line)q.push(t);else if(t>b.line)q.push(t+r)}var u=a.line+Math.min(c.length,500);ee(a.line,u);q.push(u);Eb=q;ge(100);Qb.push({from:a.line,to:b.line+1,diff:r});var v={from:a,to:b,text:c};if(Rb){for(var w=Rb;w.next;w=w.next){}w.next=v}else Rb=v;id(md(d),md(e),x(Gb.from.line),x(Gb.to.line))}function Kc(){var a=Db.height*Td()+2*Xd();return a*.99>wb.offsetHeight?a:false}function Lc(a){var b=Kc();P.style.display=b?"block":"none";if(b){M.style.height=vb.style.minHeight=b+"px";P.style.height=wb.clientHeight+"px";if(a!=null){P.scrollTop=wb.scrollTop=a;if(r)setTimeout(function(){if(P.scrollTop!=a)return;P.scrollTop=a+(a?-1:1);P.scrollTop=a},0)}}else{vb.style.minHeight=""}ub.style.top=Wb*Td()+"px"}function Mc(){_b=lc(0);bc=true;var a=_b.text.length;Db.iter(1,Db.size,function(b){var c=b.text;if(!b.hidden&&c.length>a){a=c.length;_b=b}});ac=false}function Nc(a,b,c){function d(d){if(db(d,b))return d;if(!db(c,d))return e;var f=d.line+a.length-(c.line-b.line)-1;var g=d.ch;if(d.line==c.line)g+=a[a.length-1].length-(c.ch-(c.line==b.line?b.ch:0));return{line:f,ch:g}}b=md(b);if(!c)c=b;else c=md(c);a=mb(a);var e;Pc(a,b,c,function(a){e=a;return{from:d(Gb.from),to:d(Gb.to)}});return e}function Oc(a,b){Pc(mb(a),Gb.from,Gb.to,function(a){if(b=="end")return{from:a,to:a};else if(b=="start")return{from:Gb.from,to:Gb.from};else return{from:Gb.from,to:a}})}function Pc(a,b,c,d){var e=a.length==1?a[0].length+b.ch:a[a.length-1].length;var f=d({line:b.line+a.length-1,ch:e});Fc(b,c,a,f.from,f.to)}function Qc(a,b,c){var d=a.line,e=b.line;if(d==e)return lc(d).text.slice(a.ch,b.ch);var f=[lc(d).text.slice(a.ch)];Db.iter(d+1,e,function(a){f.push(a.text)});f.push(lc(e).text.slice(0,b.ch));return f.join(c||"\n")}function Rc(a){return Qc(Gb.from,Gb.to,a)}function Sc(){if(dc)return;zb.set(f.pollInterval,function(){he();Vc();if(Fb)Sc();je()})}function Tc(){function b(){he();var c=Vc();if(!c&&!a){a=true;zb.set(60,b)}else{dc=false;Sc()}je()}var a=false;dc=true;zb.set(20,b)}function Vc(){if(Tb||!Fb||nb(C)||f.readOnly)return false;var a=C.value;if(a==Uc)return false;Hb=null;var b=0,c=Math.min(Uc.length,a.length);while(b<c&&Uc[b]==a[b])++b;if(b<Uc.length)Gb.from={line:Gb.from.line,ch:Gb.from.ch-(Uc.length-b)};else if(Mb&&cb(Gb.from,Gb.to))Gb.to={line:Gb.to.line,ch:Math.min(lc(Gb.to.line).text.length,Gb.to.ch+(a.length-b))};Oc(a.slice(b),"end");if(a.length>1e3){C.value=Uc=""}else Uc=a;return true}function Wc(a){if(!cb(Gb.from,Gb.to)){Uc="";C.value=Rc();if(Fb)bb(C)}else if(a)Uc=C.value=""}function Xc(){if(f.readOnly!="nocursor")C.focus()}function Yc(){var a=Zc();$c(a.x,a.y,a.x,a.yBot);if(!Fb)return;var b=vb.getBoundingClientRect(),c=null;if(a.y+b.top<0)c=true;else if(a.y+b.top+Td()>(window.innerHeight||document.documentElement.clientHeight))c=false;if(c!=null){var d=ib.style.display=="none";if(d){ib.style.display="";ib.style.left=a.x+"px";ib.style.top=a.y-Wb+"px"}ib.scrollIntoView(c);if(d)ib.style.display="none"}}function Zc(){var a=Nd(Gb.inverted?Gb.from:Gb.to);var b=f.lineWrapping?Math.min(a.x,rb.offsetWidth):a.x;return{x:b,y:a.y,yBot:a.yBot}}function $c(a,b,c,d){var e=_c(a,b,c,d);if(e.scrollLeft!=null){wb.scrollLeft=e.scrollLeft}if(e.scrollTop!=null){P.scrollTop=wb.scrollTop=e.scrollTop}}function _c(a,b,c,d){var e=Yd(),g=Xd();b+=g;d+=g;a+=e;c+=e;var h=wb.clientHeight,i=P.scrollTop,j={};var k=Kc()||Infinity;var l=b<g+10,m=d+g>k-10;if(b<i)j.scrollTop=l?0:Math.max(0,b);else if(d>i+h)j.scrollTop=(m?k:d)-h;var n=wb.clientWidth,o=wb.scrollLeft;var p=f.fixedGutter?tb.clientWidth:0;var q=a<p+e+10;if(a<o+p||q){if(q)a=0;j.scrollLeft=Math.max(0,a-10-p)}else if(c>n+o-3){j.scrollLeft=c+10-n}return j}function ad(a){var b=Td(),c=(a!=null?a:P.scrollTop)-Xd();var d=Math.max(0,Math.floor(c/b));var e=Math.ceil((c+wb.clientHeight)/b);return{from:J(Db,d),to:J(Db,e)}}function bd(a,b,c){function o(){var a=Y.firstChild,b=false;Db.iter(Xb,Yb,function(c){if(!a)return;if(!c.hidden){var d=Math.round(a.offsetHeight/l)||1;if(c.height!=d){mc(c,d);Ub=b=true}}a=a.nextSibling});return b}if(!wb.clientWidth){Xb=Yb=Wb=0;return}var d=ad(c);if(a!==true&&a.length==0&&d.from>Xb&&d.to<Yb){Lc(c);return}var e=Math.max(d.from-100,0),g=Math.min(Db.size,d.to+100);if(Xb<e&&e-Xb<20)e=Xb;if(Yb>g&&Yb-g<20)g=Math.min(Db.size,Yb);var h=a===true?[]:cd([{from:Xb,to:Yb,domStart:0}],a);var i=0;for(var j=0;j<h.length;++j){var k=h[j];if(k.from<e){k.domStart+=e-k.from;k.from=e}if(k.to>g)k.to=g;if(k.from>=k.to)h.splice(j--,1);else i+=k.to-k.from}if(i==g-e&&e==Xb&&g==Yb){Lc(c);return}h.sort(function(a,b){return a.domStart-b.domStart});var l=Td(),m=tb.style.display;Y.style.display="none";dd(e,g,h);Y.style.display=tb.style.display="";var n=e!=Xb||g!=Yb||Zb!=wb.clientHeight+l;if(n)Zb=wb.clientHeight+l;if(e!=Xb||g!=Yb&&f.onViewportChange)setTimeout(function(){if(f.onViewportChange)f.onViewportChange(kc,e,g)});Xb=e;Yb=g;Wb=K(Db,e);if(Y.childNodes.length!=Yb-Xb)throw new Error("BAD PATCH! "+JSON.stringify(h)+" size="+(Yb-Xb)+" nodes="+Y.childNodes.length);if(f.lineWrapping)o();tb.style.display=m;if(n||Ub){ed()&&f.lineWrapping&&o()&&ed()}Lc(c);fd();if(!b&&f.onUpdate)f.onUpdate(kc);return true}function cd(a,b){for(var c=0,d=b.length||0;c<d;++c){var e=b[c],f=[],g=e.diff||0;for(var h=0,i=a.length;h<i;++h){var j=a[h];if(e.to<=j.from&&e.diff)f.push({from:j.from+g,to:j.to+g,domStart:j.domStart});else if(e.to<=j.from||e.from>=j.to)f.push(j);else{if(e.from>j.from)f.push({from:j.from,to:e.from,domStart:j.domStart});if(e.to<j.to)f.push({from:e.to+g,to:j.to+g,domStart:j.domStart+(e.to-j.from)})}}a=f}return a}function dd(a,b,c){function d(a){var b=a.nextSibling;a.parentNode.removeChild(a);return b}if(!c.length)gb(Y);else{var e=0,f=Y.firstChild,g;for(var h=0;h<c.length;++h){var i=c[h];while(i.domStart>e){f=d(f);e++}for(var j=0,k=i.to-i.from;j<k;++j){f=f.nextSibling;e++}}while(f)f=d(f)}var l=c.shift(),f=Y.firstChild,j=a;Db.iter(a,b,function(a){if(l&&l.to==j)l=c.shift();if(!l||l.from>j){if(a.hidden)var b=fb("pre");else{var b=a.getElement(yd);if(a.className)b.className=a.className;if(a.bgClassName){var d=fb("pre"," ",a.bgClassName,"position: absolute; left: 0; right: 0; top: 0; bottom: 0; z-index: -2");b=fb("div",[d,b],null,"position: relative")}}Y.insertBefore(b,f)}else{f=f.nextSibling}++j})}function ed(){if(!f.gutter&&!f.lineNumbers)return;var a=ub.offsetHeight,b=wb.clientHeight;tb.style.height=(a-b<2?b:a)+"px";var c=document.createDocumentFragment(),d=Xb,e;Db.iter(Xb,Math.max(Yb,Xb+1),function(a){if(a.hidden){c.appendChild(fb("pre"))}else{var b=a.gutterMarker;var g=f.lineNumbers?f.lineNumberFormatter(d+f.firstLineNumber):null;if(b&&b.text)g=b.text.replace("%N%",g!=null?g:"");else if(g==null)g=" ";var h=c.appendChild(fb("pre",null,b&&b.style));h.innerHTML=g;for(var i=1;i<a.height;++i){h.appendChild(fb("br"));h.appendChild(document.createTextNode(" "))}if(!b)e=d}++d});tb.style.display="none";hb(sb,c);if(e!=null&&f.lineNumbers){var g=sb.childNodes[e-Xb];var h=String(Db.size).length,i=ab(g.firstChild),j="";while(i.length+j.length<h)j+=" ";if(j)g.insertBefore(document.createTextNode(j),g.firstChild)}tb.style.display="";var k=Math.abs((parseInt(rb.style.marginLeft)||0)-tb.offsetWidth)>2;rb.style.marginLeft=tb.offsetWidth+"px";Ub=false;return k}function fd(){var a=cb(Gb.from,Gb.to);var b=Nd(Gb.from,true);var c=a?b:Nd(Gb.to,true);var d=Gb.inverted?b:c,e=Td();var g=_(xb),h=_(Y);E.style.top=Math.max(0,Math.min(wb.offsetHeight,d.y+h.top-g.top))+"px";E.style.left=Math.max(0,Math.min(wb.offsetWidth,d.x+h.left-g.left))+"px";if(a){ib.style.top=d.y+"px";ib.style.left=(f.lineWrapping?Math.min(d.x,rb.offsetWidth):d.x)+"px";ib.style.display="";$.style.display="none"}else{var i=b.y==c.y,j=document.createDocumentFragment();var k=rb.clientWidth||rb.offsetWidth;var l=rb.clientHeight||rb.offsetHeight;var m=function(a,b,c,d){var e=q?"width: "+(!c?k:k-c-a)+"px":"right: "+c+"px";j.appendChild(fb("div",null,"CodeMirror-selected","position: absolute; left: "+a+"px; top: "+b+"px; "+e+"; height: "+d+"px"))};if(Gb.from.ch&&b.y>=0){var n=i?k-c.x:0;m(b.x,b.y,n,e)}var o=Math.max(0,b.y+(Gb.from.ch?e:0));var p=Math.min(c.y,l)-o;if(p>.2*e)m(0,o,0,p);if((!i||!Gb.from.ch)&&c.y<l-.5*e)m(0,c.y,k-c.x,e);hb($,j);ib.style.display="none";$.style.display=""}}function gd(a){if(a)Hb=Hb||(Gb.inverted?Gb.to:Gb.from);else Hb=null}function hd(a,b){var c=Hb&&md(Hb);if(c){if(db(c,a))a=c;else if(db(b,c))b=c}id(a,b);Pb=true}function id(a,b,c,d){ec=null;if(c==null){c=Gb.from.line;d=Gb.to.line}if(cb(Gb.from,a)&&cb(Gb.to,b))return;if(db(b,a)){var e=b;b=a;a=e}if(a.line!=c){var g=jd(a,c,Gb.from.ch);if(!g)Jd(a.line,false);else a=g}if(b.line!=d)b=jd(b,d,Gb.to.ch);if(cb(a,b))Gb.inverted=false;else if(cb(a,Gb.to))Gb.inverted=false;else if(cb(b,Gb.from))Gb.inverted=true;if(f.autoClearEmptyLines&&cb(Gb.from,Gb.to)){var h=Gb.inverted?a:b;if(h.line!=Gb.from.line&&Gb.from.line<Db.size){var i=lc(Gb.from.line);if(/^\s+$/.test(i.text))setTimeout(le(function(){if(i.parent&&/^\s+$/.test(i.text)){var a=I(i);Nc("",{line:a,ch:0},{line:a,ch:i.text.length})}},10))}}Gb.from=a;Gb.to=b;Sb=true}function jd(a,b,c){function d(b){var d=a.line+b,e=b==1?Db.size:-1;while(d!=e){var g=lc(d);if(!g.hidden){var h=a.ch;if(f||h>c||h>g.text.length)h=g.text.length;return{line:d,ch:h}}d+=b}}var e=lc(a.line);var f=a.ch==e.text.length&&a.ch!=c;if(!e.hidden)return a;if(a.line>=b)return d(1)||d(-1);else return d(-1)||d(1)}function kd(a,b,c){var d=md({line:a,ch:b||0});(c?hd:id)(d,d)}function ld(a){return Math.max(0,Math.min(a,Db.size-1))}function md(a){if(a.line<0)return{line:0,ch:0};if(a.line>=Db.size)return{line:Db.size-1,ch:lc(Db.size-1).text.length};var b=a.ch,c=lc(a.line).text.length;if(b==null||b>c)return{line:a.line,ch:c};else if(b<0)return{line:a.line,ch:0};else return a}function nd(a,b){function g(){for(var b=d+a,c=a<0?-1:Db.size;b!=c;b+=a){var e=lc(b);if(!e.hidden){d=b;f=e;return true}}}function h(b){if(e==(a<0?0:f.text.length)){if(!b&&g())e=a<0?f.text.length:0;else return false}else e+=a;return true}var c=Gb.inverted?Gb.from:Gb.to,d=c.line,e=c.ch;var f=lc(d);if(b=="char")h();else if(b=="column")h(true);else if(b=="word"){var i=false;for(;;){if(a<0)if(!h())break;if(lb(f.text.charAt(e)))i=true;else if(i){if(a<0){a=1;h()}break}if(a>0)if(!h())break}}return{line:d,ch:e}}function od(a,b){var c=a<0?Gb.from:Gb.to;if(Hb||cb(Gb.from,Gb.to))c=nd(a,b);kd(c.line,c.ch,true)}function pd(a,b){if(!cb(Gb.from,Gb.to))Nc("",Gb.from,Gb.to);else if(a<0)Nc("",nd(a,b),Gb.to);else Nc("",Gb.from,nd(a,b));Pb=true}function qd(a,b){var c=0,d=Nd(Gb.inverted?Gb.from:Gb.to,true);if(ec!=null)d.x=ec;if(b=="page"){var e=Math.min(wb.clientHeight,window.innerHeight||document.documentElement.clientHeight);var f=Od(d.x,d.y+e*a)}else if(b=="line"){var g=Td();var f=Od(d.x,d.y+.5*g+a*g)}if(b=="page")P.scrollTop+=Nd(f,true).y-d.y;kd(f.line,f.ch,true);ec=d.x}function rd(a){var b=lc(a.line).text;var c=a.ch,d=a.ch;if(b){if(a.after===false||d==b.length)--c;else++d;var e=b.charAt(c);var f=lb(e)?lb:/\s/.test(e)?function(a){return/\s/.test(a)}:function(a){return!/\s/.test(a)&&!lb(a)};while(c>0&&f(b.charAt(c-1)))--c;while(d<b.length&&f(b.charAt(d)))++d}return{from:{line:a.line,ch:c},to:{line:a.line,ch:d}}}function sd(a){hd({line:a,ch:0},md({line:a+1,ch:0}))}function td(a){if(cb(Gb.from,Gb.to))return ud(Gb.from.line,a);var b=Gb.to.line-(Gb.to.ch?0:1);for(var c=Gb.from.line;c<=b;++c)ud(c,a)}function ud(a,b){if(!b)b="add";if(b=="smart"){if(!Cb.indent)b="prev";else var c=de(a)}var d=lc(a),e=d.indentation(f.tabSize),g=d.text.match(/^\s*/)[0],h;if(b=="smart"){h=Cb.indent(c,d.text.slice(g.length),d.text);if(h==W)b="prev"}if(b=="prev"){if(a)h=lc(a-1).indentation(f.tabSize);else h=0}else if(b=="add")h=e+f.indentUnit;else if(b=="subtract")h=e-f.indentUnit;h=Math.max(0,h);var i=h-e;var j="",k=0;if(f.indentWithTabs)for(var l=Math.floor(h/f.tabSize);l;--l){k+=f.tabSize;j+="	"}while(k<h){++k;j+=" "}if(j!=g)Nc(j,{line:a,ch:0},{line:a,ch:g.length})}function vd(){Cb=a.getMode(f,f.mode);Db.iter(0,Db.size,function(a){a.stateAfter=null});Eb=[0];ge()}function wd(){var a=f.gutter||f.lineNumbers;tb.style.display=a?"":"none";if(a)Ub=true;else Y.parentNode.style.marginLeft=0}function xd(a,b){if(f.lineWrapping){xb.className+=" CodeMirror-wrap";var c=wb.clientWidth/Wd()-3;Db.iter(0,Db.size,function(a){if(a.hidden)return;var b=Math.ceil(a.text.length/c)||1;if(b!=1)mc(a,b)});rb.style.minWidth=pb.style.left=""}else{xb.className=xb.className.replace(" CodeMirror-wrap","");Mc();Db.iter(0,Db.size,function(a){if(a.height!=1&&!a.hidden)mc(a,1)})}Qb.push({from:0,to:Db.size})}function yd(a){var b=f.tabSize-a%f.tabSize,c=cc[b];if(c)return c;for(var d="",e=0;e<b;++e)d+=" ";var g=fb("span",d,"cm-tab");return cc[b]={element:g,width:b}}function zd(){wb.className=wb.className.replace(/\s*cm-s-\S+/g,"")+f.theme.replace(/(^|\s)\s*/g," cm-s-")}function Ad(){var a=i[f.keyMap].style;xb.className=xb.className.replace(/\s*cm-keymap-\S+/g,"")+(a?" cm-keymap-"+a:"")}function Bd(){this.set=[]}function Cd(a,b,c){function e(a,b,c,e){lc(a).addMark(new A(b,c,e,d))}a=md(a);b=md(b);var d=new Bd;if(!db(a,b))return d;if(a.line==b.line)e(a.line,a.ch,b.ch,c);else{e(a.line,a.ch,null,c);for(var f=a.line+1,g=b.line;f<g;++f)e(f,null,null,c);e(b.line,null,b.ch,c)}Qb.push({from:a.line,to:b.line+1});return d}function Dd(a){a=md(a);var b=new B(a.ch);lc(a.line).addMark(b);return b}function Ed(a){a=md(a);var b=[],c=lc(a.line).marked;if(!c)return b;for(var d=0,e=c.length;d<e;++d){var f=c[d];if((f.from==null||f.from<=a.ch)&&(f.to==null||f.to>=a.ch))b.push(f.marker||f)}return b}function Fd(a,b,c){if(typeof a=="number")a=lc(ld(a));a.gutterMarker={text:b,style:c};Ub=true;return a}function Gd(a){if(typeof a=="number")a=lc(ld(a));a.gutterMarker=null;Ub=true}function Hd(a,b){var c=a,d=a;if(typeof a=="number")d=lc(ld(a));else c=I(a);if(c==null)return null;if(b(d,c))Qb.push({from:c,to:c+1});else return null;return d}function Id(a,b,c){return Hd(a,function(a){if(a.className!=b||a.bgClassName!=c){a.className=b;a.bgClassName=c;return true}})}function Jd(a,b){return Hd(a,function(a,c){if(a.hidden!=b){a.hidden=b;if(!f.lineWrapping){if(b&&a.text.length==_b.text.length){ac=true}else if(!b&&a.text.length>_b.text.length){_b=a;ac=false}}mc(a,b?0:1);var d=Gb.from.line,e=Gb.to.line;if(b&&(d==c||e==c)){var g=d==c?jd({line:d,ch:0},d,0):Gb.from;var h=e==c?jd({line:e,ch:0},e,0):Gb.to;if(!h)return;id(g,h)}return Ub=true}})}function Kd(a){if(typeof a=="number"){if(!jc(a))return null;var b=a;a=lc(a);if(!a)return null}else{var b=I(a);if(b==null)return null}var c=a.gutterMarker;return{line:b,handle:a,text:a.text,markerText:c&&c.text,markerClass:c&&c.style,lineClass:a.className,bgClass:a.bgClassName}}function Ld(a,b){function e(a){return Md(c,a).left}if(b<=0)return 0;var c=lc(a),d=c.text;var f=0,g=0,h=d.length,i;var j=Math.min(h,Math.ceil(b/Wd()));for(;;){var k=e(j);if(k<=b&&j<h)j=Math.min(h,Math.ceil(j*1.2));else{i=k;h=j;break}}if(b>i)return h;j=Math.floor(h*.8);k=e(j);if(k<b){f=j;g=k}for(;;){if(h-f<=1)return i-b>b-g?f:h;var l=Math.ceil((f+h)/2),m=e(l);if(m>b){h=l;i=m}else{f=l;g=m}}}function Md(a,b){if(b==0)return{top:0,left:0};var c=f.lineWrapping&&b<a.text.length&&Z.test(a.text.slice(b-1,b+1));var d=a.getElement(yd,b,c);hb(qb,d);var e=d.anchor;var g=e.offsetTop,h=e.offsetLeft;if(n&&g==0&&h==0){var i=fb("span","x");e.parentNode.insertBefore(i,e.nextSibling);g=i.offsetTop}return{top:g,left:h}}function Nd(a,b){var c,d=Td(),e=d*(K(Db,a.line)-(b?Wb:0));if(a.ch==0)c=0;else{var g=Md(lc(a.line),a.ch);c=g.left;if(f.lineWrapping)e+=Math.max(0,g.top)}return{x:c,y:e,yBot:e+d}}function Od(a,b){function m(a){var b=Md(h,a);if(j){var d=Math.round(b.top/c);l=d!=k;return Math.max(0,b.left+(d-k)*wb.clientWidth)}return b.left}var c=Td(),d=Wd(),e=Wb+Math.floor(b/c);if(e<0)return{line:0,ch:0};var g=J(Db,e);if(g>=Db.size)return{line:Db.size-1,ch:lc(Db.size-1).text.length};var h=lc(g),i=h.text;var j=f.lineWrapping,k=j?e-K(Db,g):0;if(a<=0&&k==0)return{line:g,ch:0};var l=false;var n=0,o=0,p=i.length,q;var r=Math.min(p,Math.ceil((a+k*wb.clientWidth*.9)/d));for(;;){var s=m(r);if(s<=a&&r<p)r=Math.min(p,Math.ceil(r*1.2));else{q=s;p=r;break}}if(a>q)return{line:g,ch:p};r=Math.floor(p*.8);s=m(r);if(s<a){n=r;o=s}for(;;){if(p-n<=1){var t=a-o<q-a;return{line:g,ch:t?n:p,after:t}}var u=Math.ceil((n+p)/2),v=m(u);if(v>a){p=u;q=v;if(l)q+=1e3}else{n=u;o=v}}}function Pd(a){var b=Nd(a,true),c=_(rb);return{x:c.left+b.x,y:c.top+b.y,yBot:c.top+b.yBot}}function Td(){if(Sd==null){Sd=fb("pre");for(var a=0;a<49;++a){Sd.appendChild(document.createTextNode("x"));Sd.appendChild(fb("br"))}Sd.appendChild(document.createTextNode("x"))}var b=Y.clientHeight;if(b==Rd)return Qd;Rd=b;hb(qb,Sd.cloneNode(true));Qd=qb.firstChild.offsetHeight/50||1;gb(qb);return Qd}function Wd(){if(wb.clientWidth==Vd)return Ud;Vd=wb.clientWidth;var a=fb("span","x");var b=fb("pre",[a]);hb(qb,b);return Ud=a.offsetWidth||10}function Xd(){return rb.offsetTop}function Yd(){return rb.offsetLeft}function Zd(a,b){var c=_(wb,true),d,e;try{d=a.clientX;e=a.clientY}catch(a){return null}if(!b&&(d-c.left>wb.clientWidth||e-c.top>wb.clientHeight))return null;var f=_(rb,true);return Od(d-f.left,e-f.top)}function $d(a){function g(){var a=mb(C.value).join("\n");if(a!=e&&!f.readOnly)le(Oc)(a,"end");E.style.position="relative";C.style.cssText=d;if(p)P.scrollTop=c;Tb=false;Wc(true);Sc()}var b=Zd(a),c=P.scrollTop;if(!b||t)return;if(cb(Gb.from,Gb.to)||db(b,Gb.from)||!db(b,Gb.to))le(kd)(b.line,b.ch);var d=C.style.cssText;E.style.position="absolute";C.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(a.clientY-5)+"px; left: "+(a.clientX-5)+"px; z-index: 1000; background: white; "+"border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";Tb=true;var e=C.value=Rc();Xc();bb(C);if(m){Q(a);var h=U(window,"mouseup",function(){h();setTimeout(g,20)},true)}else{setTimeout(g,50)}}function _d(){clearInterval(Bb);var a=true;ib.style.visibility="";Bb=setInterval(function(){ib.style.visibility=(a=!a)?"":"hidden"},f.cursorBlinkRate)}function be(a){function p(a,b,c){if(!a.text)return;var d=a.styles,e=g?0:a.text.length-1,f;for(var i=g?0:d.length-2,j=g?d.length:-2;i!=j;i+=2*h){var k=d[i];if(d[i+1]!=m){e+=h*k.length;continue}for(var l=g?0:k.length-1,p=g?k.length:-1;l!=p;l+=h,e+=h){if(e>=b&&e<c&&o.test(f=k.charAt(l))){var q=ae[f];if(q.charAt(1)==">"==g)n.push(f);else if(n.pop()!=q.charAt(0))return{pos:e,match:false};else if(!n.length)return{pos:e,match:true}}}}}var b=Gb.inverted?Gb.from:Gb.to,c=lc(b.line),d=b.ch-1;var e=d>=0&&ae[c.text.charAt(d)]||ae[c.text.charAt(++d)];if(!e)return;var f=e.charAt(0),g=e.charAt(1)==">",h=g?1:-1,i=c.styles;for(var j=d+1,k=0,l=i.length;k<l;k+=2)if((j-=i[k].length)<=0){var m=i[k+1];break}var n=[c.text.charAt(d)],o=/[(){}[\]]/;for(var k=b.line,l=g?Math.min(k+100,Db.size):Math.max(-1,k-100);k!=l;k+=h){var c=lc(k),q=k==b.line;var r=p(c,q&&g?d+1:0,q&&!g?d:c.text.length);if(r)break}if(!r)r={pos:null,match:false};var m=r.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";var s=Cd({line:b.line,ch:d},{line:b.line,ch:d+1},m),t=r.pos!=null&&Cd({line:k,ch:r.pos},{line:k,ch:r.pos+1},m);var u=le(function(){s.clear();t&&t.clear()});if(a)setTimeout(u,800);else $b=u}function ce(a){var b,c;for(var d=a,e=a-40;d>e;--d){if(d==0)return 0;var g=lc(d-1);if(g.stateAfter)return d;var h=g.indentation(f.tabSize);if(c==null||b>h){c=d-1;b=h}}return c}function de(a){var b=ce(a),c=b&&lc(b-1).stateAfter;if(!c)c=y(Cb);else c=x(Cb,c);Db.iter(b,a,function(a){a.highlight(Cb,c,f.tabSize);a.stateAfter=x(Cb,c)});if(b<a)Qb.push({from:b,to:a});if(a<Db.size&&!lc(a).stateAfter)Eb.push(a);return c}function ee(a,b){var c=de(a);Db.iter(a,b,function(a){a.highlight(Cb,c,f.tabSize);a.stateAfter=x(Cb,c)})}function fe(){var a=+(new Date)+f.workTime;var b=Eb.length;while(Eb.length){if(!lc(Xb).stateAfter)var c=Xb;else var c=Eb.pop();if(c>=Db.size)continue;var d=ce(c),e=d&&lc(d-1).stateAfter;if(e)e=x(Cb,e);else e=y(Cb);var g=0,h=Cb.compareStates,i=false,j=d,k=false;Db.iter(j,Db.size,function(b){var d=b.stateAfter;if(+(new Date)>a){Eb.push(j);ge(f.workDelay);if(i)Qb.push({from:c,to:j+1});return k=true}var l=b.highlight(Cb,e,f.tabSize);if(l)i=true;b.stateAfter=x(Cb,e);var m=null;if(h){var n=d&&h(d,e);if(n!=W)m=!!n}if(m==null){if(l!==false||!d)g=0;else if(++g>3&&(!Cb.indent||Cb.indent(d,"")==Cb.indent(e,"")))m=true}if(m)return true;++j});if(k)return;if(i)Qb.push({from:c,to:j+1})}if(b&&f.onHighlightComplete)f.onHighlightComplete(kc)}function ge(a){if(!Eb.length)return;Ab.set(a,le(fe))}function he(){Ob=Pb=Rb=null;Qb=[];Sb=false;Vb=[]}function je(){if(ac)Mc();if(bc&&!f.lineWrapping){var a=pb.offsetWidth,b=Md(_b,_b.text.length).left;if(!o){pb.style.left=b+"px";rb.style.minWidth=b+a+"px"}bc=false}var c,d;if(Sb){var e=Zc();c=_c(e.x,e.y,e.x,e.yBot)}if(Qb.length||c&&c.scrollTop!=null)d=bd(Qb,true,c&&c.scrollTop);if(!d){if(Sb)fd();if(Ub)ed()}if(c)Yc();if(Sb)_d();if(Fb&&!Tb&&(Ob===true||Ob!==false&&Sb))Wc(Pb);if(Sb&&f.matchBrackets)setTimeout(le(function(){if($b){$b();$b=null}if(cb(Gb.from,Gb.to))be(false)}),20);var g=Sb,h=Vb;if(Rb&&f.onChange&&kc)f.onChange(kc,Rb);if(g&&f.onCursorActivity)f.onCursorActivity(kc);for(var i=0;i<h.length;++i)h[i](kc);if(d&&f.onUpdate)f.onUpdate(kc)}function le(a){return function(){if(!(ke++))he();try{var b=a.apply(this,arguments)}finally{if(!--ke)je()}return b}}function me(a){fc.startCompound();try{return a()}finally{fc.endCompound()}}var f={},u=a.defaults;for(var z in u)if(u.hasOwnProperty(z))f[z]=(e&&e.hasOwnProperty(z)?e:u)[z];var C=fb("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em");C.setAttribute("wrap","off");C.setAttribute("autocorrect","off");C.setAttribute("autocapitalize","off");var E=fb("div",[C],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");var M=fb("div",null,"CodeMirror-scrollbar-inner");var P=fb("div",[M],"CodeMirror-scrollbar");var Y=fb("div"),$=fb("div",null,null,"position: relative; z-index: -1");var ib=fb("pre"," ","CodeMirror-cursor"),pb=fb("pre"," ","CodeMirror-cursor","visibility: hidden");var qb=fb("div",null,null,"position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden;");var rb=fb("div",[qb,ib,pb,$,Y],null,"position: relative; z-index: 0");var sb=fb("div",null,"CodeMirror-gutter-text"),tb=fb("div",[sb],"CodeMirror-gutter");var ub=fb("div",[tb,fb("div",[rb],"CodeMirror-lines")],null,"position: relative");var vb=fb("div",[ub],null,"position: relative");var wb=fb("div",[vb],"CodeMirror-scroll");wb.setAttribute("tabIndex","-1");var xb=fb("div",[E,P,wb],"CodeMirror"+(f.lineWrapping?" CodeMirror-wrap":""));if(d.appendChild)d.appendChild(xb);else d(xb);zd();Ad();if(b)C.style.width="0px";if(!r)wb.draggable=true;rb.style.outline="none";if(f.tabindex!=null)C.tabIndex=f.tabindex;if(f.autofocus)Xc();if(!f.gutter&&!f.lineNumbers)tb.style.display="none";if(v)E.style.height="1px",E.style.position="absolute";if(w){P.style.zIndex=-2;P.style.visibility="hidden"}else if(o)P.style.minWidth="18px";try{Wd()}catch(yb){if(yb.message.match(/runtime/i))yb=new Error("A CodeMirror inside a P-style element does not work in Internet Explorer. (innerHTML bug)");throw yb}var zb=new V,Ab=new V,Bb;var Cb,Db=new G([new F([new D("")])]),Eb,Fb;vd();var Gb={from:{line:0,ch:0},to:{line:0,ch:0},inverted:false};var Hb,Ib,Jb,Kb=0,Lb,Mb=false,Nb=false;var Ob,Pb,Qb,Rb,Sb,Tb,Ub,Vb;var Wb=0,Xb=0,Yb=0,Zb=0;var $b;var _b=lc(0),ac=false,bc=true;var cc={};var dc=false;var ec=null;le(function(){nc(f.value||"");Ob=false})();var fc=new L;U(wb,"mousedown",le(rc));U(wb,"dblclick",le(sc));U(rb,"selectstart",O);if(!m)U(wb,"contextmenu",$d);U(wb,"scroll",qc);U(P,"scroll",pc);U(P,"mousedown",function(){if(Fb)setTimeout(Xc,0)});var gc=U(window,"resize",function(){if(xb.parentNode)bd(true);else gc()},true);U(C,"keyup",le(Cc));U(C,"input",Tc);U(C,"keydown",le(Ac));U(C,"keypress",le(Bc));U(C,"focus",Dc);U(C,"blur",Ec);if(f.dragDrop){U(wb,"dragstart",uc);U(wb,"dragenter",hc);U(wb,"dragover",hc);U(wb,"drop",le(tc))}U(wb,"paste",function(){Xc();Tc()});U(C,"paste",Tc);U(C,"cut",le(function(){if(!f.readOnly)Oc("")}));if(v)U(vb,"mouseup",function(){if(document.activeElement==C)C.blur();Xc()});var ic;try{ic=document.activeElement==C}catch(yb){}if(ic||f.autofocus)setTimeout(Dc,20);else Ec();var kc=xb.CodeMirror={getValue:oc,setValue:le(nc),getSelection:Rc,replaceSelection:le(Oc),focus:function(){window.focus();Xc();Dc();Tc()},setOption:function(a,b){var c=f[a];f[a]=b;if(a=="mode"||a=="indentUnit")vd();else if(a=="readOnly"&&b=="nocursor"){Ec();C.blur()}else if(a=="readOnly"&&!b){Wc(true)}else if(a=="theme")zd();else if(a=="lineWrapping"&&c!=b)le(xd)();else if(a=="tabSize")bd(true);else if(a=="keyMap")Ad();if(a=="lineNumbers"||a=="gutter"||a=="firstLineNumber"||a=="theme"||a=="lineNumberFormatter"){wd();bd(true)}},getOption:function(a){return f[a]},undo:le(Hc),redo:le(Ic),indentLine:le(function(a,b){if(typeof b!="string"){if(b==null)b=f.smartIndent?"smart":"prev";else b=b?"add":"subtract"}if(jc(a))ud(a,b)}),indentSelection:le(td),historySize:function(){return{undo:fc.done.length,redo:fc.undone.length}},clearHistory:function(){fc=new L},setHistory:function(a){fc=new L;fc.done=a.done;fc.undone=a.undone},getHistory:function(){fc.time=0;return{done:fc.done.concat([]),undone:fc.undone.concat([])}},matchBrackets:le(function(){be(true)}),getTokenAt:le(function(a){a=md(a);return lc(a.line).getTokenAt(Cb,de(a.line),f.tabSize,a.ch)}),getStateAfter:function(a){a=ld(a==null?Db.size-1:a);return de(a+1)},cursorCoords:function(a,b){if(a==null)a=Gb.inverted;return this.charCoords(a?Gb.from:Gb.to,b)},charCoords:function(a,b){a=md(a);if(b=="local")return Nd(a,false);if(b=="div")return Nd(a,true);return Pd(a)},coordsChar:function(a){var b=_(rb);return Od(a.x-b.left,a.y-b.top)},markText:le(Cd),setBookmark:Dd,findMarksAt:Ed,setMarker:le(Fd),clearMarker:le(Gd),setLineClass:le(Id),hideLine:le(function(a){return Jd(a,true)}),showLine:le(function(a){return Jd(a,false)}),onDeleteLine:function(a,b){if(typeof a=="number"){if(!jc(a))return null;a=lc(a)}(a.handlers||(a.handlers=[])).push(b);return a},lineInfo:Kd,getViewport:function(){return{from:Xb,to:Yb}},addWidget:function(a,b,c,d,e){a=Nd(md(a));var f=a.yBot,g=a.x;b.style.position="absolute";vb.appendChild(b);if(d=="over")f=a.y;else if(d=="near"){var h=Math.max(wb.offsetHeight,Db.height*Td()),i=Math.max(vb.clientWidth,rb.clientWidth)-Yd();if(a.yBot+b.offsetHeight>h&&a.y>b.offsetHeight)f=a.y-b.offsetHeight;if(g+b.offsetWidth>i)g=i-b.offsetWidth}b.style.top=f+Xd()+"px";b.style.left=b.style.right="";if(e=="right"){g=vb.clientWidth-b.offsetWidth;b.style.right="0px"}else{if(e=="left")g=0;else if(e=="middle")g=(vb.clientWidth-b.offsetWidth)/2;b.style.left=g+Yd()+"px"}if(c)$c(g,f,g+b.offsetWidth,f+b.offsetHeight)},lineCount:function(){return Db.size},clipPos:md,getCursor:function(a){if(a==null)a=Gb.inverted;return eb(a?Gb.from:Gb.to)},somethingSelected:function(){return!cb(Gb.from,Gb.to)},setCursor:le(function(a,b,c){if(b==null&&typeof a.line=="number")kd(a.line,a.ch,c);else kd(a,b,c)}),setSelection:le(function(a,b,c){(c?hd:id)(md(a),md(b||a))}),getLine:function(a){if(jc(a))return lc(a).text},getLineHandle:function(a){if(jc(a))return lc(a)},setLine:le(function(a,b){if(jc(a))Nc(b,{line:a,ch:0},{line:a,ch:lc(a).text.length})}),removeLine:le(function(a){if(jc(a))Nc("",{line:a,ch:0},md({line:a+1,ch:0}))}),replaceRange:le(Nc),getRange:function(a,b,c){return Qc(md(a),md(b),c)},triggerOnKeyDown:le(Ac),execCommand:function(a){return h[a](kc)},moveH:le(od),deleteH:le(pd),moveV:le(qd),toggleOverwrite:function(){if(Mb){Mb=false;ib.className=ib.className.replace(" CodeMirror-overwrite","")}else{Mb=true;ib.className+=" CodeMirror-overwrite"}},posFromIndex:function(a){var b=0,c;Db.iter(0,Db.size,function(d){var e=d.text.length+1;if(e>a){c=a;return true}a-=e;++b});return md({line:b,ch:c})},indexFromPos:function(a){if(a.line<0||a.ch<0)return 0;var b=a.ch;Db.iter(0,a.line,function(a){b+=a.text.length+1});return b},scrollTo:function(a,b){if(a!=null)wb.scrollLeft=a;if(b!=null)P.scrollTop=wb.scrollTop=b;bd([])},getScrollInfo:function(){return{x:wb.scrollLeft,y:P.scrollTop,height:P.scrollHeight,width:wb.scrollWidth}},setSize:function(a,b){function c(a){a=String(a);return/^\d+$/.test(a)?a+"px":a}if(a!=null)xb.style.width=c(a);if(b!=null)wb.style.height=c(b);kc.refresh()},operation:function(a){return le(a)()},compoundChange:function(a){return me(a)},refresh:function(){bd(true,null,Kb);if(P.scrollHeight>Kb)P.scrollTop=Kb},getInputField:function(){return C},getWrapperElement:function(){return xb},getScrollerElement:function(){return wb},getGutterElement:function(){return tb}};var wc;var zc=null;var Uc="";Bd.prototype.clear=le(function(){var a=Infinity,b=-Infinity;for(var c=0,d=this.set.length;c<d;++c){var e=this.set[c],f=e.marked;if(!f||!e.parent)continue;var g=I(e);a=Math.min(a,g);b=Math.max(b,g);for(var h=0;h<f.length;++h)if(f[h].marker==this)f.splice(h--,1)}if(a!=Infinity)Qb.push({from:a,to:b+1})});Bd.prototype.find=function(){var a,b;for(var c=0,d=this.set.length;c<d;++c){var e=this.set[c],f=e.marked;for(var g=0;g<f.length;++g){var h=f[g];if(h.marker==this){if(h.from!=null||h.to!=null){var i=I(e);if(i!=null){if(h.from!=null)a={line:i,ch:h.from};if(h.to!=null)b={line:i,ch:h.to}}}}}}return{from:a,to:b}};var Qd,Rd,Sd;var Ud,Vd=0;var ae={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"};var ke=0;for(var ne in g)if(g.propertyIsEnumerable(ne)&&!kc.propertyIsEnumerable(ne))kc[ne]=g[ne];return kc}function j(a){if(typeof a=="string")return i[a];else return a}function k(a,b,c,d,e){function f(b){b=j(b);var c=b[a];if(c===false){if(e)e();return true}if(c!=null&&d(c))return true;if(b.nofallthrough){if(e)e();return true}var g=b.fallthrough;if(g==null)return false;if(Object.prototype.toString.call(g)!="[object Array]")return f(g);for(var h=0,i=g.length;h<i;++h){if(f(g[h]))return true}return false}if(b&&f(b))return true;return f(c)}function l(a){var b=ob[T(a,"keyCode")];return b=="Ctrl"||b=="Alt"||b=="Shift"||b=="Mod"}function x(a,b){if(b===true)return b;if(a.copyState)return a.copyState(b);var c={};for(var d in b){var e=b[d];if(e instanceof Array)e=e.concat([]);c[d]=e}return c}function y(a,b,c){return a.startState?a.startState(b,c):true}function z(a,b){this.pos=this.start=0;this.string=a;this.tabSize=b||8}function A(a,b,c,d){this.from=a;this.to=b;this.style=c;this.marker=d}function B(a){this.from=a;this.to=a;this.line=null}function D(a,b){this.styles=b||[a,null];this.text=a;this.height=1}function E(a,b,c,d){for(var e=0,f=0,g=0;f<b;e+=2){var h=c[e],i=f+h.length;if(g==0){if(i>a)d.push(h.slice(a-f,Math.min(h.length,b-f)),c[e+1]);if(i>=a)g=1}else if(g==1){if(i>b)d.push(h.slice(0,b-f),c[e+1]);else d.push(h,c[e+1])}f=i}}function F(a){this.lines=a;this.parent=null;for(var b=0,c=a.length,d=0;b<c;++b){a[b].parent=this;d+=a[b].height}this.height=d}function G(a){this.children=a;var b=0,c=0;for(var d=0,e=a.length;d<e;++d){var f=a[d];b+=f.chunkSize();c+=f.height;f.parent=this}this.size=b;this.height=c;this.parent=null}function H(a,b){while(!a.lines){for(var c=0;;++c){var d=a.children[c],e=d.chunkSize();if(b<e){a=d;break}b-=e}}return a.lines[b]}function I(a){if(a.parent==null)return null;var b=a.parent,c=kb(b.lines,a);for(var d=b.parent;d;b=d,d=d.parent){for(var e=0,f=d.children.length;;++e){if(d.children[e]==b)break;c+=d.children[e].chunkSize()}}return c}function J(a,b){var c=0;a:do{for(var d=0,e=a.children.length;d<e;++d){var f=a.children[d],g=f.height;if(b<g){a=f;continue a}b-=g;c+=f.chunkSize()}return c}while(!a.lines);for(var d=0,e=a.lines.length;d<e;++d){var h=a.lines[d],i=h.height;if(b<i)break;b-=i}return c+d}function K(a,b){var c=0;a:do{for(var d=0,e=a.children.length;d<e;++d){var f=a.children[d],g=f.chunkSize();if(b<g){a=f;continue a}b-=g;c+=f.height}return c}while(!a.lines);for(var d=0;d<b;++d)c+=a.lines[d].height;return c}function L(){this.time=0;this.done=[];this.undone=[];this.compound=0;this.closed=false}function M(){Q(this)}function N(a){if(!a.stop)a.stop=M;return a}function O(a){if(a.preventDefault)a.preventDefault();else a.returnValue=false}function P(a){if(a.stopPropagation)a.stopPropagation();else a.cancelBubble=true}function Q(a){O(a);P(a)}function R(a){return a.target||a.srcElement}function S(a){var b=a.which;if(b==null){if(a.button&1)b=1;else if(a.button&2)b=3;else if(a.button&4)b=2}if(c&&a.ctrlKey&&b==1)b=3;return b}function T(a,b){var c=a.override&&a.override.hasOwnProperty(b);return c?a.override[b]:a[b]}function U(a,b,c,d){if(typeof a.addEventListener=="function"){a.addEventListener(b,c,false);if(d)return function(){a.removeEventListener(b,c,false)}}else{var e=function(a){c(a||window.event)};a.attachEvent("on"+b,e);if(d)return function(){a.detachEvent("on"+b,e)}}}function V(){this.id=null}function $(a,b,c){if(b==null){b=a.search(/[^\s\u00a0]/);if(b==-1)b=a.length}for(var d=0,e=0;d<b;++d){if(a.charAt(d)=="	")e+=c-e%c;else++e}return e}function _(a,b){try{var c=a.getBoundingClientRect();c={top:c.top,left:c.left}}catch(d){c={top:0,left:0}}if(!b){if(window.pageYOffset==null){var e=document.documentElement||document.body.parentNode;if(e.scrollTop==null)e=document.body;c.top+=e.scrollTop;c.left+=e.scrollLeft}else{c.top+=window.pageYOffset;c.left+=window.pageXOffset}}return c}function ab(a){return a.textContent||a.innerText||a.nodeValue||""}function bb(a){if(b){a.selectionStart=0;a.selectionEnd=a.value.length}else a.select()}function cb(a,b){return a.line==b.line&&a.ch==b.ch}function db(a,b){return a.line<b.line||a.line==b.line&&a.ch<b.ch}function eb(a){return{line:a.line,ch:a.ch}}function fb(a,b,c,d){var e=document.createElement(a);if(c)e.className=c;if(d)e.style.cssText=d;if(typeof b=="string")ib(e,b);else if(b)for(var f=0;f<b.length;++f)e.appendChild(b[f]);return e}function gb(a){a.innerHTML="";return a}function hb(a,b){gb(a).appendChild(b)}function ib(a,b){if(p){a.innerHTML="";a.appendChild(document.createTextNode(b))}else a.textContent=b}function jb(a,b){if(!b)return 0;if(!a)return b.length;for(var c=a.length,d=b.length;c>=0&&d>=0;--c,--d)if(a.charAt(c)!=b.charAt(d))break;return d+1}function kb(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0,d=a.length;c<d;++c)if(a[c]==b)return c;return-1}function lb(a){return/\w/.test(a)||a.toUpperCase()!=a.toLowerCase()}"use strict";a.defaults={value:"",mode:null,theme:"default",indentUnit:2,indentWithTabs:false,smartIndent:true,tabSize:4,keyMap:"default",extraKeys:null,electricChars:true,autoClearEmptyLines:false,onKeyEvent:null,onDragEvent:null,lineWrapping:false,lineNumbers:false,gutter:false,fixedGutter:false,firstLineNumber:1,readOnly:false,dragDrop:true,onChange:null,onCursorActivity:null,onViewportChange:null,onGutterClick:null,onHighlightComplete:null,onUpdate:null,onFocus:null,onBlur:null,onScroll:null,matchBrackets:false,cursorBlinkRate:530,workTime:100,workDelay:200,pollInterval:100,undoDepth:40,tabindex:null,autofocus:null,lineNumberFormatter:function(a){return a}};var b=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent);var c=b||/Mac/.test(navigator.platform);var d=/Win/.test(navigator.platform);var e=a.modes={},f=a.mimeModes={};a.defineMode=function(b,c){if(!a.defaults.mode&&b!="null")a.defaults.mode=b;if(arguments.length>2){c.dependencies=[];for(var d=2;d<arguments.length;++d)c.dependencies.push(arguments[d])}e[b]=c};a.defineMIME=function(a,b){f[a]=b};a.resolveMode=function(b){if(typeof b=="string"&&f.hasOwnProperty(b))b=f[b];else if(typeof b=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(b))return a.resolveMode("application/xml");if(typeof b=="string")return{name:b};else return b||{name:"null"}};a.getMode=function(b,c){var c=a.resolveMode(c);var d=e[c.name];if(!d)return a.getMode(b,"text/plain");return d(b,c)};a.listModes=function(){var a=[];for(var b in e)if(e.propertyIsEnumerable(b))a.push(b);return a};a.listMIMEs=function(){var a=[];for(var b in f)if(f.propertyIsEnumerable(b))a.push({mime:b,mode:f[b]});return a};var g=a.extensions={};a.defineExtension=function(a,b){g[a]=b};var h=a.commands={selectAll:function(a){a.setSelection({line:0,ch:0},{line:a.lineCount()-1})},killLine:function(a){var b=a.getCursor(true),c=a.getCursor(false),d=!cb(b,c);if(!d&&a.getLine(b.line).length==b.ch)a.replaceRange("",b,{line:b.line+1,ch:0});else a.replaceRange("",b,d?c:{line:b.line})},deleteLine:function(a){var b=a.getCursor().line;a.replaceRange("",{line:b,ch:0},{line:b})},undo:function(a){a.undo()},redo:function(a){a.redo()},goDocStart:function(a){a.setCursor(0,0,true)},goDocEnd:function(a){a.setSelection({line:a.lineCount()-1},null,true)},goLineStart:function(a){a.setCursor(a.getCursor().line,0,true)},goLineStartSmart:function(a){var b=a.getCursor();var c=a.getLine(b.line),d=Math.max(0,c.search(/\S/));a.setCursor(b.line,b.ch<=d&&b.ch?0:d,true)},goLineEnd:function(a){a.setSelection({line:a.getCursor().line},null,true)},goLineUp:function(a){a.moveV(-1,"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,"page")},goPageDown:function(a){a.moveV(1,"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goWordRight:function(a){a.moveH(1,"word")},delCharLeft:function(a){a.deleteH(-1,"char")},delCharRight:function(a){a.deleteH(1,"char")},delWordLeft:function(a){a.deleteH(-1,"word")},delWordRight:function(a){a.deleteH(1,"word")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("	","end")},defaultTab:function(a){if(a.somethingSelected())a.indentSelection("add");else a.replaceSelection("	","end")},transposeChars:function(a){var b=a.getCursor(),c=a.getLine(b.line);if(b.ch>0&&b.ch<c.length-1)a.replaceRange(c.charAt(b.ch)+c.charAt(b.ch-1),{line:b.line,ch:b.ch-1},{line:b.line,ch:b.ch+1})},newlineAndIndent:function(a){a.replaceSelection("\n","end");a.indentLine(a.getCursor().line)},toggleOverwrite:function(a){a.toggleOverwrite()}};var i=a.keyMap={};i.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharRight",Backspace:"delCharLeft",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"};i.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordLeft","Ctrl-Delete":"delWordRight","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"};i.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordLeft","Ctrl-Alt-Backspace":"delWordRight","Alt-Delete":"delWordRight","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]};i["default"]=c?i.macDefault:i.pcDefault;i.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageUp","Shift-Ctrl-V":"goPageDown","Ctrl-D":"delCharRight","Ctrl-H":"delCharLeft","Alt-D":"delWordRight","Alt-Backspace":"delWordLeft","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};a.fromTextArea=function(b,c){function f(){b.value=i.getValue()}if(!c)c={};c.value=b.value;if(!c.tabindex&&b.tabindex)c.tabindex=b.tabindex;if(c.autofocus==null){var d=document.body;try{d=document.activeElement}catch(e){}c.autofocus=d==b||b.getAttribute("autofocus")!=null&&d==document.body}if(b.form){var g=U(b.form,"submit",f,true);if(typeof b.form.submit=="function"){var h=b.form.submit;b.form.submit=function j(){f();b.form.submit=h;b.form.submit();b.form.submit=j}}}b.style.display="none";var i=a(function(a){b.parentNode.insertBefore(a,b.nextSibling)},c);i.save=f;i.getTextArea=function(){return b};i.toTextArea=function(){f();b.parentNode.removeChild(i.getWrapperElement());b.style.display="";if(b.form){g();if(typeof b.form.submit=="function")b.form.submit=h}};return i};var m=/gecko\/\d{7}/i.test(navigator.userAgent);var n=/MSIE \d/.test(navigator.userAgent);var o=/MSIE [1-7]\b/.test(navigator.userAgent);var p=/MSIE [1-8]\b/.test(navigator.userAgent);var q=n&&document.documentMode==5;var r=/WebKit\//.test(navigator.userAgent);var s=/Chrome\//.test(navigator.userAgent);var t=/Opera\//.test(navigator.userAgent);var u=/Apple Computer/.test(navigator.vendor);var v=/KHTML\//.test(navigator.userAgent);var w=/Mac OS X 10\D([7-9]|\d\d)\D/.test(navigator.userAgent);a.copyState=x;a.startState=y;z.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==0},peek:function(){return this.string.charAt(this.pos)||undefined},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(a){var b=this.string.charAt(this.pos);if(typeof a=="string")var c=b==a;else var c=b&&(a.test?a.test(b):a(b));if(c){++this.pos;return b}},eatWhile:function(a){var b=this.pos;while(this.eat(a)){}return this.pos>b},eatSpace:function(){var a=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos)))++this.pos;return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){var b=this.string.indexOf(a,this.pos);if(b>-1){this.pos=b;return true}},backUp:function(a){this.pos-=a},column:function(){return $(this.string,this.start,this.tabSize)},indentation:function(){return $(this.string,null,this.tabSize)},match:function(a,b,c){if(typeof a=="string"){var d=function(a){return c?a.toLowerCase():a};if(d(this.string).indexOf(d(a),this.pos)==this.pos){if(b!==false)this.pos+=a.length;return true}}else{var e=this.string.slice(this.pos).match(a);if(e&&b!==false)this.pos+=e[0].length;return e}},current:function(){return this.string.slice(this.start,this.pos)}};a.StringStream=z;A.prototype={attach:function(a){this.marker.set.push(a)},detach:function(a){var b=kb(this.marker.set,a);if(b>-1)this.marker.set.splice(b,1)},split:function(a,b){if(this.to<=a&&this.to!=null)return null;var c=this.from<a||this.from==null?null:this.from-a+b;var d=this.to==null?null:this.to-a+b;return new A(c,d,this.style,this.marker)},dup:function(){return new A(null,null,this.style,this.marker)},clipTo:function(a,b,c,d,e){if(a&&d>this.from&&(d<this.to||this.to==null))this.from=null;else if(this.from!=null&&this.from>=b)this.from=Math.max(d,this.from)+e;if(c&&(b<this.to||this.to==null)&&(b>this.from||this.from==null))this.to=null;else if(this.to!=null&&this.to>b)this.to=d<this.to?this.to+e:b},isDead:function(){return this.from!=null&&this.to!=null&&this.from>=this.to},sameSet:function(a){return this.marker==a.marker}};B.prototype={attach:function(a){this.line=a},detach:function(a){if(this.line==a)this.line=null},split:function(a,b){if(a<this.from){this.from=this.to=this.from-a+b;return this}},isDead:function(){return this.from>this.to},clipTo:function(a,b,c,d,e){if((a||b<this.from)&&(c||d>this.to)){this.from=0;this.to=-1}else if(this.from>b){this.from=this.to=Math.max(d,this.from)+e}},sameSet:function(a){return false},find:function(){if(!this.line||!this.line.parent)return null;return{line:I(this.line),ch:this.from}},clear:function(){if(this.line){var a=kb(this.line.marked,this);if(a!=-1)this.line.marked.splice(a,1);this.line=null}}};var C=" ";if(m||n&&!o)C="​";else if(t)C="";D.inheritMarks=function(a,b){var c=new D(a),d=b&&b.marked;if(d){for(var e=0;e<d.length;++e){if(d[e].to==null&&d[e].style){var f=c.marked||(c.marked=[]),g=d[e];var h=g.dup();f.push(h);h.attach(c)}}}return c};D.prototype={replace:function(a,b,c){var d=[],e=this.marked,f=b==null?this.text.length:b;E(0,a,this.styles,d);if(c)d.push(c,null);E(f,this.text.length,this.styles,d);this.styles=d;this.text=this.text.slice(0,a)+c+this.text.slice(f);this.stateAfter=null;if(e){var g=c.length-(f-a);for(var h=0;h<e.length;++h){var i=e[h];i.clipTo(a==null,a||0,b==null,f,g);if(i.isDead()){i.detach(this);e.splice(h--,1)}}}},split:function(a,b){var c=[b,null],d=this.marked;E(a,this.text.length,this.styles,c);var e=new D(b+this.text.slice(a),c);if(d){for(var f=0;f<d.length;++f){var g=d[f];var h=g.split(a,b.length);if(h){if(!e.marked)e.marked=[];e.marked.push(h);h.attach(e);if(h==g)d.splice(f--,1)}}}return e},append:function(a){var b=this.text.length,c=a.marked,d=this.marked;this.text+=a.text;E(0,a.text.length,a.styles,this.styles);if(d){for(var e=0;e<d.length;++e)if(d[e].to==null)d[e].to=b}if(c&&c.length){if(!d)this.marked=d=[];a:for(var e=0;e<c.length;++e){var f=c[e];if(!f.from){for(var g=0;g<d.length;++g){var h=d[g];if(h.to==b&&h.sameSet(f)){h.to=f.to==null?null:f.to+b;if(h.isDead()){h.detach(this);c.splice(e--,1)}continue a}}}d.push(f);f.attach(this);f.from+=b;if(f.to!=null)f.to+=b}}},fixMarkEnds:function(a){var b=this.marked,c=a.marked;if(!b)return;a:for(var d=0;d<b.length;++d){var e=b[d],f=e.to==null;if(f&&c){for(var g=0;g<c.length;++g){var h=c[g];if(!h.sameSet(e)||h.from!=null)continue;if(e.from==this.text.length&&h.to==0){c.splice(g,1);b.splice(d--,1);continue a}else{f=false;break}}}if(f)e.to=this.text.length}},fixMarkStarts:function(){var a=this.marked;if(!a)return;for(var b=0;b<a.length;++b)if(a[b].from==null)a[b].from=0},addMark:function(a){a.attach(this);if(this.marked==null)this.marked=[];this.marked.push(a);this.marked.sort(function(a,b){return(a.from||0)-(b.from||0)})},highlight:function(a,b,c){var d=new z(this.text,c),e=this.styles,f=0;var g=false,h=e[0],i;if(this.text==""&&a.blankLine)a.blankLine(b);while(!d.eol()){var j=a.token(d,b);var k=this.text.slice(d.start,d.pos);d.start=d.pos;if(f&&e[f-1]==j)e[f-2]+=k;else if(k){if(!g&&(e[f+1]!=j||f&&e[f-2]!=i))g=true;e[f++]=k;e[f++]=j;i=h;h=e[f]}if(d.pos>5e3){e[f++]=this.text.slice(d.pos);e[f++]=null;break}}if(e.length!=f){e.length=f;g=true}if(f&&e[f-2]!=i)g=true;return g||(e.length<5&&this.text.length<10?null:false)},getTokenAt:function(a,b,c,d){var e=this.text,f=new z(e,c);while(f.pos<d&&!f.eol()){f.start=f.pos;var g=a.token(f,b)}return{start:f.start,end:f.pos,string:f.current(),className:g||null,state:b}},indentation:function(a){return $(this.text,null,a)},getElement:function(a,b,c){function h(b,c,g){if(!c)return;if(d&&n&&c.charAt(0)==" ")c=" "+c.slice(1);d=false;if(!f.test(c)){e+=c.length;var h=document.createTextNode(c)}else{var h=document.createDocumentFragment(),i=0;while(true){f.lastIndex=i;var j=f.exec(c);var k=j?j.index-i:c.length-i;if(k){h.appendChild(document.createTextNode(c.slice(i,i+k)));e+=k}if(!j)break;i+=k+1;if(j[0]=="	"){var l=a(e);h.appendChild(l.element.cloneNode(true));e+=l.width}else{var m=fb("span","•","cm-invalidchar");m.title="\\u"+j[0].charCodeAt(0).toString(16);h.appendChild(m);e+=1}}}if(g)b.appendChild(fb("span",[h],g));else b.appendChild(h)}function q(a){if(!a)return null;return"cm-"+a.replace(/ +/g," cm-")}var d=true,e=0,f=/[\t\u0000-\u0019\u200b\u2028\u2029\uFEFF]/g;var g=fb("pre");var i=h;if(b!=null){var j=0,k=g.anchor=fb("span");i=function(a,d,e){var f=d.length;if(b>=j&&b<j+f){if(b>j){h(a,d.slice(0,b-j),e);if(c)a.appendChild(fb("wbr"))}a.appendChild(k);var g=b-j;h(k,t?d.slice(g,g+1):d.slice(g),e);if(t)h(a,d.slice(g+1),e);b--;j+=f}else{j+=f;h(a,d,e);if(j==b&&j==p){ib(k,C);a.appendChild(k)}else if(j>b+10&&/\s/.test(d))i=function(){}}}}var l=this.styles,m=this.text,o=this.marked;var p=m.length;if(!m&&b==null){i(g," ")}else if(!o||!o.length){for(var r=0,s=0;s<p;r+=2){var u=l[r],v=l[r+1],w=u.length;if(s+w>p)u=u.slice(0,p-s);s+=w;i(g,u,q(v))}}else{var x=0,r=0,y="",v,z=0;var A=o[0].from||0,B=[],D=0;var E=function(){var a;while(D<o.length&&((a=o[D]).from==x||a.from==null)){if(a.style!=null)B.push(a);++D}A=D<o.length?o[D].from:Infinity;for(var b=0;b<B.length;++b){var c=B[b].to;if(c==null)c=Infinity;if(c==x)B.splice(b--,1);else A=Math.min(c,A)}};var F=0;while(x<p){if(A==x)E();var G=Math.min(p,A);while(true){if(y){var H=x+y.length;var I=v;for(var J=0;J<B.length;++J)I=(I?I+" ":"")+B[J].style;i(g,H>G?y.slice(0,G-x):y,I);if(H>=G){y=y.slice(G-x);x=G;break}x=H}y=l[r++];v=q(l[r++])}}}return g},cleanUp:function(){this.parent=null;if(this.marked)for(var a=0,b=this.marked.length;a<b;++a)this.marked[a].detach(this)}};F.prototype={chunkSize:function(){return this.lines.length},remove:function(a,b,c){for(var d=a,e=a+b;d<e;++d){var f=this.lines[d];this.height-=f.height;f.cleanUp();if(f.handlers)for(var g=0;g<f.handlers.length;++g)c.push(f.handlers[g])}this.lines.splice(a,b)},collapse:function(a){a.splice.apply(a,[a.length,0].concat(this.lines))},insertHeight:function(a,b,c){this.height+=c;this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));for(var d=0,e=b.length;d<e;++d)b[d].parent=this},iterN:function(a,b,c){for(var d=a+b;a<d;++a)if(c(this.lines[a]))return true}};G.prototype={chunkSize:function(){return this.size},remove:function(a,b,c){this.size-=b;for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(a<f){var g=Math.min(b,f-a),h=e.height;e.remove(a,g,c);this.height-=h-e.height;if(f==g){this.children.splice(d--,1);e.parent=null}if((b-=g)==0)break;a=0}else a-=f}if(this.size-b<25){var i=[];this.collapse(i);this.children=[new F(i)];this.children[0].parent=this}},collapse:function(a){for(var b=0,c=this.children.length;b<c;++b)this.children[b].collapse(a)},insert:function(a,b){var c=0;for(var d=0,e=b.length;d<e;++d)c+=b[d].height;this.insertHeight(a,b,c)},insertHeight:function(a,b,c){this.size+=b.length;this.height+=c;for(var d=0,e=this.children.length;d<e;++d){var f=this.children[d],g=f.chunkSize();if(a<=g){f.insertHeight(a,b,c);if(f.lines&&f.lines.length>50){while(f.lines.length>50){var h=f.lines.splice(f.lines.length-25,25);var i=new F(h);f.height-=i.height;this.children.splice(d+1,0,i);i.parent=this}this.maybeSpill()}break}a-=g}},maybeSpill:function(){if(this.children.length<=10)return;var a=this;do{var b=a.children.splice(a.children.length-5,5);var c=new G(b);if(!a.parent){var d=new G(a.children);d.parent=a;a.children=[d,c];a=d}else{a.size-=c.size;a.height-=c.height;var e=kb(a.parent.children,a);a.parent.children.splice(e+1,0,c)}c.parent=a.parent}while(a.children.length>10);a.parent.maybeSpill()},iter:function(a,b,c){this.iterN(a,b-a,c)},iterN:function(a,b,c){for(var d=0,e=this.children.length;d<e;++d){var f=this.children[d],g=f.chunkSize();if(a<g){var h=Math.min(b,g-a);if(f.iterN(a,h,c))return true;if((b-=h)==0)break;a=0}else a-=g}}};L.prototype={addChange:function(a,b,c){this.undone.length=0;var d=+(new Date),e=this.done[this.done.length-1],f=e&&e[e.length-1];var g=d-this.time;if(this.compound&&e&&!this.closed){e.push({start:a,added:b,old:c})}else if(g>400||!f||this.closed||f.start>a+c.length||f.start+f.added<a){this.done.push([{start:a,added:b,old:c}]);this.closed=false}else{var h=Math.max(0,f.start-a),i=Math.max(0,a+c.length-(f.start+f.added));for(var j=h;j>0;--j)f.old.unshift(c[j-1]);for(var j=i;j>0;--j)f.old.push(c[c.length-j]);if(h)f.start=a;f.added+=b-(c.length-h-i)}this.time=d},startCompound:function(){if(!(this.compound++))this.closed=true},endCompound:function(){if(!--this.compound)this.closed=true}};a.e_stop=Q;a.e_preventDefault=O;a.e_stopPropagation=P;a.connect=U;V.prototype={set:function(a,b){clearTimeout(this.id);this.id=setTimeout(b,a)}};var W=a.Pass={toString:function(){return"CodeMirror.Pass"}};var X=function(){if(p)return false;var a=fb("div");return"draggable"in a||"dragDrop"in a}();var Y=function(){var a=fb("textarea");a.value="foo\nbar";if(a.value.indexOf("\r")>-1)return"\r\n";return"\n"}();var Z=/^$/;if(m)Z=/$'/;else if(u)Z=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/;else if(s)Z=/\-[^ \-\.?]|\?[^ \-\.?\]\}:;!'\"\),\/]|[\.!\"#&%\)*+,:;=>\]|\}~][\(\{\[<]|\$'/;a.setTextContent=ib;var mb="\n\nb".split(/\n/).length!=3?function(a){var b=0,c=[],d=a.length;while(b<=d){var e=a.indexOf("\n",b);if(e==-1)e=a.length;var f=a.slice(b,a.charAt(e-1)=="\r"?e-1:e);var g=f.indexOf("\r");if(g!=-1){c.push(f.slice(0,g));b+=g+1}else{c.push(f);b=e+1}}return c}:function(a){return a.split(/\r\n?|\n/)};a.splitLines=mb;var nb=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return false}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(c){}if(!b||b.parentElement()!=a)return false;return b.compareEndPoints("StartToEnd",b)!=0};a.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}});a.defineMIME("text/plain","null");var ob={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};a.keyNames=ob;(function(){for(var a=0;a<10;a++)ob[a+48]=String(a);for(var a=65;a<=90;a++)ob[a]=String.fromCharCode(a);for(var a=1;a<=12;a++)ob[a+111]=ob[a+63235]="F"+a})();return a}();